# Xras Magnetic Storm

Интеграция для [Home Assistant](https://www.home-assistant.io/), предоставляющая информацию о текущей и прогнозируемой геомагнитной активности (Kp-индексе) из источника [xras.ru](https://xras.ru/).

## Возможности

Интеграция добавляет 4 сенсора в Home Assistant:

- `sensor.magnetic_storm_<город>_today` — текущая магнитная обстановка
- `sensor.magnetic_storm_<город>_forecast_today` — прогноз на завтра
- `sensor.magnetic_storm_<город>_forecast_tomorrow` — прогноз на послезавтра
- `sensor.magnetic_storm_<город>_forecast_after_tomorrow` — прогноз на четвертый день

## Значение сенсора (Kp-индекс)

| Значение | Уровень              | Обозначение |
|----------|----------------------|-------------|
| 0–4      | Нормальное поле      | —           |
| 5        | Слабая буря          | G1          |
| 6        | Умеренно сильная     | G2          |
| 7        | Сильная              | G3          |
| 8        | Очень сильная        | G4          |
| 9        | Экстремальная буря   | G5          |

## Атрибуты сенсоров

Каждый сенсор содержит расширенные атрибуты:

| Атрибут | Описание |
|--------|----------|
| `F10`  | Поток солнечного излучения на частоте 10.7 см (F10.7 Index), SFU |
| `Ap`   | Планетарный индекс геомагнитной активности |
| `H0–H23` | Почасовые значения Kp-индекса (по локальному времени) |
| `Sn`   | Среднее число солнечных пятен за день |

Сенсоры прогноза дополнительно содержат вероятности возникновения магнитных бурь:

| Атрибут | Описание |
|--------|----------|
| `P4`   | Вероятность G1 (слабая буря) |
| `P5`   | Вероятность G2 (умеренная) |
| `P6`   | Вероятность G3 (сильная) |
| `P7`   | Вероятность G4+ (очень сильная / экстремальная) |

## Установка

### Через HACS

1. Перейдите в HACS → Интеграции → Пользовательские репозитории
2. Добавьте репозиторий: https://github.com/Alangasar/xras_magnetic_storm
3. Перезагрузите Home Assistant
4. Добавьте интеграцию: **Настройки → Устройства и службы → Добавить интеграцию → Xras Magnetic Storm**

### Ручная установка

1. Скопируйте каталог `magnetic_storm` в `config/custom_components`
2. Перезапустите Home Assistant
3. Добавьте интеграцию через интерфейс, как указано выше

## Поддерживаемые города

<details>
<summary>Показать список (102 города)</summary>

Абакан, Анадырь, Архангельск, Астрахань, Барнаул, Белгород, Биробиджан, Благовещенск, Братск, Брянск, Владивосток, Владикавказ, Владимир, Волгоград, Вологда, Воркута, Воронеж, Горно-Алтайск, Грозный, Екатеринбург, Иваново, Ижевск, Иркутск, Йошкар-Ола, Казань, Калининград, Калуга, Кемерово, Киров, Кишинёв, Комсомольск-на-Амуре, Кострома, Краснодар, Красноярск, Курган, Курск, Кызыл, Ленск, Липецк, Магадан, Майкоп, Махачкала, Мещовск, Минеральные Воды, Мирный (Якутия), Москва, Мурманск, Набережные Челны, Назрань, Нальчик, Нерюнгри, Нижневартовск, Нижний Новгород, Новгород, Новокузнецк, Новосибирск, Новый Уренгой, Норильск, Омск, Оренбург, Орёл, Пенза, Пермь, Петрозаводск, Петропавловск-Камчатский, Псков, Ростов-на-Дону, Рязань, Салехард, Самара, Санкт-Петербург, Саранск, Саратов, Симферополь, Смоленск, Сочи, Ставрополь, Станция Восток, Станция Мирный, Сургут, Сыктывкар, Тамбов, Тверь, Тикси, Тольятти, Томск, Тула, Тюмень, Улан-Удэ, Ульяновск, Уфа, Хабаровск, Ханты-Мансийск, Чебоксары, Челябинск, Череповец, Черкесск, Чита, Элиста, Южно-Сахалинск, Якутск, Ярославль

</details>

---

## Благодарности

Данные предоставляются порталом [xras.ru](https://xras.ru/)

